(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{474:function(t,e,n){var content=n(549);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(22).default)("16793233",content,!0,{sourceMap:!1})},475:function(t,e,n){var content=n(551);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(22).default)("11f54af9",content,!0,{sourceMap:!1})},476:function(t,e,n){var content=n(553);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(22).default)("ca0b4370",content,!0,{sourceMap:!1})},548:function(t,e,n){"use strict";var r=n(474);n.n(r).a},549:function(t,e,n){(t.exports=n(21)(!1)).push([t.i,".air-column[data-v-2559b9e3]{border-bottom:1px dashed #ddd;padding-bottom:20px;margin-bottom:20px}.air-column h2[data-v-2559b9e3]{margin-bottom:20px;font-size:22px;font-weight:400}[data-v-2559b9e3] .el-select .el-input{width:130px}.input-with-select[data-v-2559b9e3]{width:590px}.input-with-select[data-v-2559b9e3] .el-input-group__prepend{background-color:#fff}.member-info[data-v-2559b9e3] .el-form-item{margin-bottom:0}.member-info-item[data-v-2559b9e3]{border-bottom:1px dashed #eee;padding-bottom:20px;position:relative}.member-info-item:first-child .delete-user[data-v-2559b9e3]{display:none}.add-member[data-v-2559b9e3]{margin-top:20px}.delete-user[data-v-2559b9e3]{display:block;background:#ddd;width:16px;height:16px;font-size:14px;text-align:center;line-height:16px;color:#fff;cursor:pointer;border-radius:50px;position:absolute;right:-30px;top:50%}.insurance>div[data-v-2559b9e3]{margin-top:10px}.insurance-item[data-v-2559b9e3]{margin-bottom:20px}.contact[data-v-2559b9e3] .el-input{width:50%}.submit[data-v-2559b9e3]{margin:50px auto;display:block;width:250px;height:50px}",""])},550:function(t,e,n){"use strict";var r=n(475);n.n(r).a},551:function(t,e,n){(t.exports=n(21)(!1)).push([t.i,".aside[data-v-df68fec8]{width:350px;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;border:1px solid #ddd}.air-info[data-v-df68fec8]{padding:15px}.air-info .info-top[data-v-df68fec8]{margin-bottom:10px}.air-info .info-top>div[data-v-df68fec8]:last-child{font-size:14px}.air-info .info-step .flight-airport strong[data-v-df68fec8]{display:block;font-size:22px;font-weight:400}.air-info .info-step .flight-airport span[data-v-df68fec8]{font-size:12px;color:#999}.air-info .info-step .flight-time[data-v-df68fec8]{text-align:center;font-size:12px;color:#999}.air-info .info-step .flight-time span[data-v-df68fec8]{display:block}.info-bar[data-v-df68fec8]{border-top:1px dashed #ddd;padding:10px 15px;font-size:14px;color:#666}.info-bar .price[data-v-df68fec8]{font-size:28px;color:orange}",""])},552:function(t,e,n){"use strict";var r=n(476);n.n(r).a},553:function(t,e,n){(t.exports=n(21)(!1)).push([t.i,".container[data-v-744f8f0b]{width:1000px;margin:20px auto}.aside[data-v-744f8f0b]{width:350px;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;border:1px solid #ddd}",""])},642:function(t,e,n){"use strict";n.r(e);var r={data:function(){return{users:[{username:"",id:""}],insurances:[],contactName:"",contactPhone:"",captcha:"",invoice:!1,seat_xid:"",air:"",infoData:{}}},computed:{allPrice:function(){if(!this.infoData.seat_infos)return 0;var t=0;return t+=this.infoData.seat_infos.org_settle_price,t+=this.infoData.airport_tax_audlet,t+=30*this.insurances.length,t*=this.users.length,this.$store.commit("air/setAllPirce",t),t}},mounted:function(){var t=this,e=this.$route.query,n=e.id,r=e.seat_xid;this.$axios({url:"/airs/"+n,params:{seat_xid:r}}).then(function(e){t.infoData=e.data,t.$store.commit("air/setInfoData",t.infoData)})},methods:{handleAddUsers:function(){this.users.push({username:"",id:""})},handleDeleteUser:function(t){this.users.splice(t,1)},handleChange:function(t){var e=this.insurances.indexOf(t);e>-1?this.insurances.splice(e,1):this.insurances.push(t)},handleSendCaptcha:function(){var t=this;this.contactPhone?this.$axios({url:"/captchas",method:"POST",data:{tel:this.contactPhone}}).then(function(e){var code=e.data.code;t.$alert("模拟手机验证码是：".concat(code),"提示")}):this.$message.error("请输入手机号码")},handleSubmit:function(){var t=this,data={users:this.users,insurances:this.insurances,contactName:this.contactName,contactPhone:this.contactPhone,invoice:this.invoice,captcha:this.captcha,seat_xid:this.$route.query.seat_xid,air:this.$route.query.id};this.users[0].username&&this.users[0].id?this.contactName?this.contactPhone?this.captcha?this.$axios({url:"/airorders",method:"POST",headers:{Authorization:"Bearer ".concat(this.$store.state.user.userInfo.token)},data:data}).then(function(e){var n=e.data.data.id;t.$router.push({path:"/air/pay",query:{id:n}})}):this.$message.error("验证码不能为空"):this.$message.error("联系电话不能为空"):this.$message.error("联系人不能为空"):this.$message.error("乘机人不能为空")}}},o=(n(548),n(11)),c=Object(o.a)(r,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"main"},[n("div",{staticClass:"air-column"},[n("h2",[t._v("剩机人")]),t._v(" "),n("el-form",{staticClass:"member-info"},t._l(t.users,function(e,r){return n("div",{key:r,staticClass:"member-info-item"},[n("el-form-item",{attrs:{label:"乘机人类型"}},[n("el-input",{staticClass:"input-with-select",attrs:{placeholder:"姓名"},model:{value:t.users[r].username,callback:function(e){t.$set(t.users[r],"username",e)},expression:"users[index].username"}},[n("el-select",{attrs:{slot:"prepend",value:"1",placeholder:"请选择"},slot:"prepend"},[n("el-option",{attrs:{label:"成人",value:"1"}})],1)],1)],1),t._v(" "),n("el-form-item",{attrs:{label:"证件类型"}},[n("el-input",{staticClass:"input-with-select",attrs:{placeholder:"证件号码"},model:{value:t.users[r].id,callback:function(e){t.$set(t.users[r],"id",e)},expression:"users[index].id"}},[n("el-select",{attrs:{slot:"prepend",value:"1",placeholder:"请选择"},slot:"prepend"},[n("el-option",{attrs:{label:"身份证",value:"1",checked:!0}})],1)],1)],1),t._v(" "),n("span",{staticClass:"delete-user",on:{click:function(e){return t.handleDeleteUser(r)}}},[t._v("-")])],1)}),0),t._v(" "),n("el-button",{staticClass:"add-member",attrs:{type:"primary"},on:{click:t.handleAddUsers}},[t._v("添加乘机人")])],1),t._v(" "),n("div",{staticClass:"air-column"},[n("h2",[t._v("保险")]),t._v(" "),n("div",t._l(t.infoData.insurances,function(e,r){return n("div",{key:r,staticClass:"insurance-item"},[n("el-checkbox",{attrs:{label:e.type+"：￥"+e.price+"/份×1  最高赔付"+e.compensation,border:""},on:{change:function(n){return t.handleChange(e.id)}}})],1)}),0)]),t._v(" "),n("div",{staticClass:"air-column"},[n("h2",[t._v("联系人")]),t._v(" "),n("div",{staticClass:"contact"},[n("el-form",{attrs:{"label-width":"60px"}},[n("el-form-item",{attrs:{label:"姓名"}},[n("el-input",{model:{value:t.contactName,callback:function(e){t.contactName=e},expression:"contactName"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"手机"}},[n("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.contactPhone,callback:function(e){t.contactPhone=e},expression:"contactPhone"}},[n("template",{slot:"append"},[n("el-button",{on:{click:t.handleSendCaptcha}},[t._v("发送验证码")])],1)],2)],1),t._v(" "),n("el-form-item",{attrs:{label:"验证码"}},[n("el-input",{model:{value:t.captcha,callback:function(e){t.captcha=e},expression:"captcha"}})],1)],1),t._v(" "),n("el-button",{staticClass:"submit",attrs:{type:"warning"},on:{click:t.handleSubmit}},[t._v("提交订单")])],1)]),t._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[t._v(t._s(t.allPrice))])])},[],!1,null,"2559b9e3",null).exports,l=(n(128),{props:{data:{type:Object,default:{seat_infos:{}}}},computed:{rankTime:function(){if(!this.data.dep_time)return"";var t=this.data.dep_time.split(":"),e=this.data.arr_time.split(":"),n=60*t[0]+ +t[1],r=60*e[0]+ +e[1],o=r-n;return o<0&&(o=r+1440-n),"".concat(Math.floor(o/60),"时").concat(o%60,"分")}}}),d=(n(550),{components:{OrderForm:c,OrderAside:Object(o.a)(l,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"aside"},[n("div",{staticClass:"air-info"},[n("el-row",{staticClass:"info-top",attrs:{type:"flex",justify:"space-between"}},[n("div",[t._v(t._s(t.data.dep_date))]),t._v(" "),n("div",[t._v(t._s(t.data.org_city_name)+" - "+t._s(t.data.dst_city_name))])]),t._v(" "),n("el-row",{staticClass:"info-step",attrs:{type:"flex",justify:"space-between",align:"middle"}},[n("el-col",{staticClass:"flight-airport",attrs:{span:5}},[n("strong",[t._v(t._s(t.data.dep_time))]),t._v(" "),n("span",[t._v(t._s(t.data.org_airport_name)+t._s(t.data.org_airport_quay))])]),t._v(" "),n("el-col",{staticClass:"flight-time",attrs:{span:14}},[n("span",[t._v("--- "+t._s(t.rankTime)+" ---")]),t._v(" "),n("span",[t._v(t._s(t.data.airline_name)+t._s(t.data.flight_no))])]),t._v(" "),n("el-col",{staticClass:"flight-airport",attrs:{span:5}},[n("strong",[t._v(t._s(t.data.arr_time))]),t._v(" "),n("span",[t._v("浦东机场T2")])])],1)],1),t._v(" "),n("el-row",{staticClass:"info-bar",attrs:{type:"flex",justify:"space-between"}},[n("span",[t._v("订单总价")]),t._v(" "),n("span",[t._v("金额")]),t._v(" "),n("span",[t._v("数量")])]),t._v(" "),n("el-row",{staticClass:"info-bar",attrs:{type:"flex",justify:"space-between"}},[n("span",[t._v("成人机票")]),t._v(" "),n("span",[t._v("￥"+t._s(t.data.seat_infos.org_settle_price))]),t._v(" "),n("span",[t._v("x1")])]),t._v(" "),n("el-row",{staticClass:"info-bar",attrs:{type:"flex",justify:"space-between"}},[n("span",[t._v("机建＋燃油")]),t._v(" "),n("span",[t._v("¥"+t._s(t.data.airport_tax_audlet)+"/人/单程")]),t._v(" "),n("span",[t._v("x1")])]),t._v(" "),n("el-row",{staticClass:"info-bar",attrs:{type:"flex",justify:"space-between",align:"middle"}},[n("span",[t._v("应付总额：")]),t._v(" "),n("span",{staticClass:"price"},[t._v("￥ "+t._s(t.$store.state.air.allPrice))])])],1)},[],!1,null,"df68fec8",null).exports}}),f=(n(552),Object(o.a)(d,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"container"},[e("el-row",{attrs:{type:"flex",justify:"space-between"}},[e("OrderForm"),this._v(" "),e("OrderAside",{attrs:{data:this.$store.state.air.infoData}})],1)],1)},[],!1,null,"744f8f0b",null));e.default=f.exports}}]);